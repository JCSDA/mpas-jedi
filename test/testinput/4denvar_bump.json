{
  "logging": {
    "categories": "Info, Test, Warning, Error, Log, Trace, Stats"
  },
  "test_framework_runtime_config": "--log_level=test_suite",
  "nml_file" : "namelist.atmosphere_2018041421",
  "resolution" : {
    "gridfname": "./restart.2018-04-15_00.00.00.nc"
  },
  "model": {
    "name": "MPAS",
    "tstep": "PT3H"
  },
  "cost_function": {
    "cost_type": "4D-Ens-Var",
    "window_begin": "2018-04-14T21:00:00Z",
    "window_length": "PT6H",
    "window_sub": "PT3H",
    "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"],
    "Jb": {
      "Background": {
        "state": [
         {
          "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"],
          "filename": "./restart.2018-04-14_21.00.00.nc",
          "date": "2018-04-14T21:00:00Z"
         },
         {
          "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"],
          "filename": "./restart.2018-04-15_00.00.00.nc",
          "date": "2018-04-15T00:00:00Z"
         },
         {
          "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"],
          "filename": "./restart.2018-04-15_03.00.00.nc",
          "date": "2018-04-15T03:00:00Z"
         }
        ]
      },
      "Covariance": {
        "covariance_time": [
         {
          "covariance": "ensemble",
          "members": "5",
          "variables": {
            "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
          },
          "date": "2018-04-14T21:00:00Z",
          "localization": {
            "localization": "BUMP",
            "date": "2018-04-14T21:00:00Z",
            "variables": {
              "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
            },
            "prefix": "mpas_4denvar_bump_1",
            "default_seed": 1,
            "method": "loc_norm",
            "_method": "cor",
            "_method": "hyb-rnd",
            "strategy": "common",
            "_strategy": "specific_univariate",
            "new_hdiag": 1,
            "new_nicas": 1,
            "load_nicas": 0,
            "load_cmat": 0,
            "_timeslot": 1,
            "mask_type": "none",
            "draw_type" : "random_uniform",
            "nc1": 1024,
            "ntry": 3,
            "nrep": 2,
            "nc3": 10,
            "dc": 1000.0e3,
            "_nl0r": 3,
            "_nl0r": 15,
            "nl0r": 1,
            "ne": 5,
            "minim_algo" : "hooke",
            "rvflt": 0.0,
            "lsqrt": 1,
            "resol": 4.0,
            "nicas_interp": "bilin",
            "network": 0,
            "mpicom": 2,
            "advmode": 0,
            "diag_interp" : "bilin",
            "grid_output": 0
          },
          "state": [
            {
              "filename": "REL_DIR/data/ensemble/mem01/restart.2018-04-14_21.00.00.nc",
              "date": "2018-04-14T21:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem02/restart.2018-04-14_21.00.00.nc",
              "date": "2018-04-14T21:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem03/restart.2018-04-14_21.00.00.nc",
              "date": "2018-04-14T21:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem04/restart.2018-04-14_21.00.00.nc",
              "date": "2018-04-14T21:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem05/restart.2018-04-14_21.00.00.nc",
              "date": "2018-04-14T21:00:00Z"
            }
          ]
         },
         {
          "covariance": "ensemble",
          "members": "5",
          "variables": {
            "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
          },
          "date": "2018-04-15T00:00:00Z",
          "localization": {
            "localization": "BUMP",
            "date": "2018-04-15T00:00:00Z",
            "variables": {
              "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
            },
            "prefix": "mpas_4denvar_bump_2",
            "default_seed": 1,
            "method": "loc_norm",
            "_method": "cor",
            "_method": "hyb-rnd",
            "strategy": "common",
            "_strategy": "specific_univariate",
            "new_hdiag": 1,
            "new_nicas": 1,
            "load_nicas": 0,
            "load_cmat": 0,
            "_timeslot": 1,
            "mask_type": "none",
            "draw_type" : "random_uniform",
            "nc1": 1024,
            "ntry": 3,
            "nrep": 2,
            "nc3": 10,
            "dc": 1000.0e3,
            "_nl0r": 3,
            "_nl0r": 15,
            "nl0r": 1,
            "ne": 5,
            "minim_algo" : "hooke",
            "rvflt": 0.0,
            "lsqrt": 1,
            "resol": 4.0,
            "nicas_interp": "bilin",
            "network": 0,
            "mpicom": 2,
            "advmode": 0,
            "diag_interp" : "bilin",
            "grid_output": 0
          },
          "state": [
            {
              "filename": "REL_DIR/data/ensemble/mem01/restart.2018-04-15_00.00.00.nc",
              "date": "2018-04-15T00:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem02/restart.2018-04-15_00.00.00.nc",
              "date": "2018-04-15T00:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem03/restart.2018-04-15_00.00.00.nc",
              "date": "2018-04-15T00:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem04/restart.2018-04-15_00.00.00.nc",
              "date": "2018-04-15T00:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem05/restart.2018-04-15_00.00.00.nc",
              "date": "2018-04-15T00:00:00Z"
            }
          ]
         },
         {
          "covariance": "ensemble",
          "members": "5",
          "variables": {
            "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
          },
          "date": "2018-04-15T03:00:00Z",
          "localization": {
            "localization": "BUMP",
            "date": "2018-04-15T03:00:00Z",
            "variables": {
              "variables": ["temperature", "pressure", "index_qv", "uReconstructZonal", "uReconstructMeridional"]
            },
            "prefix": "mpas_4denvar_bump_3",
            "default_seed": 1,
            "method": "loc_norm",
            "_method": "cor",
            "_method": "hyb-rnd",
            "strategy": "common",
            "_strategy": "specific_univariate",
            "new_hdiag": 1,
            "new_nicas": 1,
            "_timeslot": 1,
            "mask_type": "none",
            "draw_type" : "random_uniform",
            "nc1": 1024,
            "ntry": 3,
            "nrep": 2,
            "nc3": 10,
            "dc": 1000.0e3,
            "_nl0r": 3,
            "_nl0r": 15,
            "nl0r": 1,
            "ne": 5,
            "minim_algo" : "hooke",
            "rvflt": 0.0,
            "lsqrt": 1,
            "resol": 4.0,
            "nicas_interp": "bilin",
            "network": 0,
            "mpicom": 2,
            "advmode": 0,
            "diag_interp" : "bilin",
            "grid_output": 0
          },
          "state": [
            {
              "filename": "REL_DIR/data/ensemble/mem01/restart.2018-04-15_03.00.00.nc",
              "date": "2018-04-15T03:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem02/restart.2018-04-15_03.00.00.nc",
              "date": "2018-04-15T03:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem03/restart.2018-04-15_03.00.00.nc",
              "date": "2018-04-15T03:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem04/restart.2018-04-15_03.00.00.nc",
              "date": "2018-04-15T03:00:00Z"
            },
            {
              "filename": "REL_DIR/data/ensemble/mem05/restart.2018-04-15_03.00.00.nc",
              "date": "2018-04-15T03:00:00Z"
            }
          ]
         }
        ]
      }
    },
    "Jo": {
      "ObsTypes": [
        {
          "ObsType": "Radiosonde",
          "ObsData": {
            "ObsDataIn": {
              "obsfile": "Data/sondes_obs_2018041500_m.nc4"
            },
            "ObsDataOut": {
              "obsfile": "Data/obsout_4denvar_bump.nc4"
            },
            "obsvalue": "ObsValue"
          },
          "variables": ["air_temperature"],
          "Covariance": {
            "covariance": "diagonal",
            "obserror": "ObsError"
          },
          "ObsFilters": [
            {
              "Filter": "Background Check",
              "variables": ["air_temperature"],
              "threshold": 3.0
            }
          ]
        },
        { 
          "ObsType": "Aircraft",
          "ObsData": {
            "ObsDataIn": {
              "obsfile": "Data/aircraft_obs_2018041500_m.nc4"
            },
            "_ObsDataOut": {
              "obsfile": "Data/obsout_4denvar_bump.nc4"
            },
            "obsvalue": "ObsValue"
          },
          "variables": ["air_temperature"],
          "Covariance": { 
            "covariance": "diagonal",
            "obserror": "ObsError"
          },
          "ObsFilters": [
            {
              "Filter": "Background Check",
              "variables": ["air_temperature"],
              "threshold": 3.0
            }
          ]
        }
      ]
    }
  },
  "minimizer": {
    "algorithm": "DRIPCG"
  },
  "output": {
    "filename": "./mpas.4denvar_bump.$Y-$M-$D_$h.$m.$s.nc"
  },
  "variational": {
    "iteration": [
      {
        "resolution": {
          "gridfname": "./restart.2018-04-15_00.00.00.nc"
        },
        "linearmodel": {
          "varchange": "Identity",
          "version": "MPASIdTLM",
          "tstep": "PT3H",
          "trajectory": {
            "tstep": "PT3H",
            "top_layer_depth": "5500.0",
            "bottom_layer_depth": "4500.0"
          }
        },
        "ninner": "10",
        "gradient_norm_reduction": "1e-10",
        "test": "on",
        "diagnostics": {
          "departures": "ombg"
        }
      },
      {
        "resolution": {
          "gridfname": "./restart.2018-04-15_00.00.00.nc"
        },
        "linearmodel": {
          "varchange": "Identity",
          "version": "MPASIdTLM",
          "tstep": "PT3H",
          "trajectory": {
            "tstep": "PT3H",
            "top_layer_depth": "5500.0",
            "bottom_layer_depth": "4500.0"
          }
        },
        "ninner": "10",
        "gradient_norm_reduction": "1e-10",
        "test": "on"
      }
    ]
  },
  "final": {
    "diagnostics": {
      "departures": "oman"
    }
  }
}
